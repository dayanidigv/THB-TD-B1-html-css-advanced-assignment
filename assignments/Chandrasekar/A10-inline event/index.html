<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Tamil Nadu Event Scheduler with Calendar</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      background: #f9f9f9;
    }
    header {
      background: #8e44ad;
      color: white;
      padding: 15px;
      text-align: center;
    }
    main {
      padding: 20px;
    }
    /* Event Cards */
    .event-container {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: center;
      margin-bottom: 30px;
    }
    .event-card {
      background: white;
      border-radius: 8px;
      padding: 15px;
      width: 220px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      text-align: center;
      transition: all 0.3s ease;
      cursor: pointer;
    }
    .event-card img {
      width: 180px;
      height: 120px;
      object-fit: cover;
      border-radius: 6px;
      display: block;
      margin: 0 auto 10px;
    }
    .event-card h3 {
      font-size: 18px;
      margin: 8px 0;
      outline: none;
    }
    .event-card p {
      font-size: 14px;
      color: #555;
      margin: 4px 0;
    }
    .event-card button {
      background: #e74c3c;
      color: white;
      border: none;
      padding: 6px 12px;
      margin-top: 8px;
      cursor: pointer;
      border-radius: 4px;
    }
    .event-card button:hover {
      background: #c0392b;
    }

    /* Form */
    form {
      max-width: 500px;
      margin: 0 auto 30px;
      background: #fff;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    form h2 {
      margin-bottom: 10px;
      color: #8e44ad;
    }
    form input, form textarea, form button {
      width: 100%;
      padding: 8px;
      margin: 6px 0;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 14px;
    }
    form button {
      background: #27ae60;
      color: white;
      border: none;
      cursor: pointer;
    }
    form button:hover {
      background: #1e8449;
    }

    /* Calendar */
    .calendar-container {
      max-width: 800px;
      margin: 30px auto;
      background: #fff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    .calendar-header {
      text-align: center;
      margin-bottom: 15px;
    }
    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 5px;
      text-align: center;
    }
    .calendar-cell {
      padding: 10px;
      border: 1px solid #ddd;
      min-height: 60px;
      border-radius: 4px;
      position: relative;
      font-size: 14px;
    }
    .calendar-cell .date {
      font-weight: bold;
      margin-bottom: 5px;
    }
    .event-dot {
      width: 8px;
      height: 8px;
      background: #8e44ad;
      border-radius: 50%;
      display: inline-block;
      margin: 2px;
    }

    /* Log */
    .log {
      max-width: 600px;
      margin: 20px auto;
      padding: 10px;
      background: #f2f2f2;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 14px;
      color: #444;
    }

    /* Export */
    #exportBtn {
      display: block;
      margin: 15px auto;
      background: #2980b9;
      color: white;
      border: none;
      padding: 8px 16px;
      cursor: pointer;
      border-radius: 5px;
    }
    #exportBtn:hover {
      background: #1f618d;
    }
  </style>
</head>
<body onload="pageLoaded()">

<header>
  <h1>üéâ Tamil Nadu Event Scheduler</h1>
  <p>Manage events & view them in monthly calendar</p>
</header>

<main>
  <!-- Preloaded Events -->
  <div class="event-container" id="calendar">
    <div class="event-card">
      <img src="https://upload.wikimedia.org/wikipedia/commons/4/4f/Bharatanatyam_Performance_DS.jpg" alt="Cultural Fest">
      <h3>Chennai Cultural Fest</h3>
      <p>Date: 2025-10-15</p>
      <p>Location: Music Academy, Chennai</p>
      <p>Classical dance and music.</p>
    </div>
    <div class="event-card">
      <img src="https://upload.wikimedia.org/wikipedia/commons/8/8b/Conference_room_--_2011.jpg" alt="Tech Conference">
      <h3>Coimbatore Tech Conference</h3>
      <p>Date: 2025-11-20</p>
      <p>Location: CODISSIA Hall, Coimbatore</p>
      <p>Technology talks and expo.</p>
    </div>
  </div>

  <!-- Add Event Form -->
  <form onsubmit="addEvent(event)">
    <h2>Add New Event</h2>
    <input type="text" id="eventTitle" placeholder="Event Title" required>
    <input type="date" id="eventDate" required>
    <input type="text" id="eventLocation" placeholder="Location" required>
    <input type="url" id="eventImage" placeholder="Poster Image URL">
    <textarea id="eventDesc" placeholder="Event Description" required></textarea>
    <button type="submit">Add Event</button>
  </form>

  <!-- Calendar -->
  <div class="calendar-container">
    <div class="calendar-header">
      <h2 id="calendarMonth"></h2>
    </div>
    <div class="calendar-grid" id="calendarGrid"></div>
    <button id="exportBtn" onclick="exportCalendar()">‚¨áÔ∏è Export Calendar</button>
  </div>

  <!-- Event Log -->
  <div class="log" id="eventLog">Event log will appear here...</div>
</main>

<script>
let events = [
  {title:"Chennai Cultural Fest", date:"2025-10-15", location:"Chennai", desc:"Classical dance and music."},
  {title:"Coimbatore Tech Conference", date:"2025-11-20", location:"Coimbatore", desc:"Technology talks and expo."}
];

function renderCalendar(){
  const today = new Date();
  const month = today.getMonth(); 
  const year = today.getFullYear();

  document.getElementById("calendarMonth").textContent = today.toLocaleString("en-US",{month:"long", year:"numeric"});

  const firstDay = new Date(year, month, 1).getDay();
  const daysInMonth = new Date(year, month+1, 0).getDate();

  const grid = document.getElementById("calendarGrid");
  grid.innerHTML = "";

  // Fill empty cells before start
  for(let i=0;i<firstDay;i++){
    grid.innerHTML += `<div class="calendar-cell"></div>`;
  }

  for(let d=1;d<=daysInMonth;d++){
    const dateStr = `${year}-${String(month+1).padStart(2,'0')}-${String(d).padStart(2,'0')}`;
    let dots = "";
    events.forEach(ev=>{
      if(ev.date === dateStr){
        dots += `<span class="event-dot" title="${ev.title}"></span>`;
      }
    });
    grid.innerHTML += `<div class="calendar-cell"><div class="date">${d}</div>${dots}</div>`;
  }
}

function addEvent(e){
  e.preventDefault();
  const title = document.getElementById("eventTitle").value;
  const date = document.getElementById("eventDate").value;
  const location = document.getElementById("eventLocation").value;
  const image = document.getElementById("eventImage").value || "https://via.placeholder.com/180x120";
  const desc = document.getElementById("eventDesc").value;

  // Add to list
  events.push({title,date,location,desc});

  // Add card
  const newCard = document.createElement("div");
  newCard.className = "event-card";
  newCard.innerHTML = `
    <img src="${image}" alt="Poster">
    <h3>${title}</h3>
    <p>Date: ${date}</p>
    <p>Location: ${location}</p>
    <p>${desc}</p>
  `;
  document.getElementById("calendar").appendChild(newCard);

  e.target.reset();
  renderCalendar();
  logEvent("Added event: " + title);
}

function exportCalendar(){
  let csv = "Title,Date,Location,Description\n";
  events.forEach(ev=>{
    csv += `"${ev.title}","${ev.date}","${ev.location}","${ev.desc}"\n`;
  });
  const blob = new Blob([csv],{type:"text/csv"});
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = "events_calendar.csv";
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  logEvent("Calendar exported");
}

function pageLoaded(){
  renderCalendar();
  logEvent("Page loaded");
}

function logEvent(msg){
  document.getElementById("eventLog").textContent = msg;
}
</script>

</body>
</html>
